"use strict";!function(){angular.module("waitrApp")}(),function(){function t(t,e,r,n,a,o){function s(){u.currentUser=null,r.logout(),a.go("login")}function i(t){u.currentUser=t}var u=this;n.$on("currentUser",function(t,e){i(e)}),n.$on(e.notAuthorized,function(t){o.alert({title:"Unauthorized!",template:"Invalid access.",buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),n.$on(e.notAuthenticated,function(t,e){r.logout(),a.go("login");o.alert({title:"Unauthenticated!",template:e.data,buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),u.currentUser=null,u.logout=s}angular.module("waitrApp",["ionic","ngCordova","angularMoment"]).run(function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).constant("AUTH_EVENTS",{notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{user:"user",restaurant:"restaurant"}).constant("SERVER_URL","http://localhost:3000").run(function(t,e,r,n,a){var o=r.getUser();o&&n(function(){t.$broadcast("currentUser",o)}),t.$on("$stateChangeStart",function(n,o){if(o.data){var s=o.data.authorizedRoles;r.isAuthorized(s)||(n.preventDefault(),r.isAuthenticated()?(t.$broadcast(e.notAuthorized),a.go(a.$current,{},{reload:!0})):(t.$broadcast(e.notAuthenticated),a.go("login")))}})}).config(function(t){t.interceptors.push("authInterceptorService")}).controller("AppCtrl",["$rootScope","AUTH_EVENTS","authService","$scope","$state","$ionicPopup",t])}(),function(){function t(t,e,r,n){r.backButton.text("").icon("ion-ios7-arrow-left"),e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"app/login/login.template.html",controller:"LoginCtrl",controllerAs:"logCtrl"}).state("customer-sign-up",{url:"/customer-registration",templateUrl:"app/registration/custReg.template.html",controller:"RegistrationCtrl",controllerAs:"regCtrl"}).state("restaurant-sign-up",{url:"/restaurant-registration",templateUrl:"app/registration/restReg.template.html",controller:"RegistrationCtrl",controllerAs:"regCtrl"}).state("customer",{url:"/customer",abstract:!0,templateUrl:"./app/customer/custCustomer.html",controller:"custCustomerCtrl",controllerAs:"ccc",resolve:{currentUser:function(t,e){var r=t.getUser();return r?r:e.go("login")}}}).state("customer.home",{url:"/home",templateUrl:"./app/customer/home/custHome.html",controller:"custHomeCtrl",controllerAs:"chc"}).state("customer.restaurant",{url:"/home/restaurant/:restaurantId",templateUrl:"./app/customer/restaurant/custRestaurant.html",controller:"custRestaurantCtrl",controllerAs:"crc"}).state("customer.waitlistconfirm",{url:"/home/restaurant/:restaurantId/waitlist-confirm",templateUrl:"./app/customer/restaurant/custRestaurantConfirm.html",controller:"custWaitListConfirmCtrl",controllerAs:"cwlc"}).state("customer.settings",{url:"/settings",templateUrl:"./app/customer/settings/custSettings.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.menu",{url:"/home/restaurant/:restaurantId/menu",templateUrl:"./app/customer/menu/custRestaurantMenu.html",controller:"custRestaurantMenuCtrl",controllerAs:"cmc"}).state("customer.editContactInfo",{url:"/settings/edit-contact-info",templateUrl:"./app/customer/settings/custEditContactInfo.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.paymentMethods",{url:"/settings/payment-methods",templateUrl:"./app/customer/settings/custPaymentMethods.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.waitlist",{url:"/waitlist",templateUrl:"./app/customer/waitlist/custWaitlist.html",controller:"custWaitlistCtrl",controllerAs:"cwc"}).state("restaurant",{url:"/restaurant",abstract:!0,templateUrl:"./app/restaurant/restaRestaurant.html",controller:"restaRestaurantCtrl",controllerAs:"rrc",resolve:{restaurantInfo:function(t,e,r){var n=t.getUser();return n&&n.restaurant_id?e.getCurrentRestaurant(n.restaurant_id).then(function(t){return{currentUser:n,restaurant:t}}):r.go("login")}}}).state("restaurant.home",{url:"/home",templateUrl:"./app/restaurant/restaHome/restaHome.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.addPerson",{url:"/home/add-person",templateUrl:"./app/restaurant/restaHome/restaAddPerson.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.editPerson",{url:"/home/edit-person/:waitlist/:person",templateUrl:"./app/restaurant/restaHome/restaEditPerson.html",controller:"restaEditCtrl",controllerAs:"rec"}).state("restaurant.profile",{url:"/profile",templateUrl:"./app/restaurant/restaProfile/restaProfile.html",controller:"restaProfileCtrl",controllerAs:"rpc"}).state("restaurant.menu",{url:"/profile/menu",templateUrl:"./app/restaurant/restaMenu/restaMenu.html",controller:"restaMenuCtrl",controllerAs:"rmc"}).state("restaurant.settings",{url:"/settings",templateUrl:"./app/restaurant/restaSettings/restaSettings.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editInfo",{url:"/settings/edit-Info",templateUrl:"./app/restaurant/restaSettings/restaEditInfo.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editContact",{url:"/settings/edit-contact",templateUrl:"./app/restaurant/restaSettings/restaEditContact.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editMenu",{url:"/settings/edit-menu",templateUrl:"./app/restaurant/restaEditMenu/restaEditMenu.html",controller:"restaEditMenuCtrl",controllerAs:"remc"}).state("restaurant.editHours",{url:"/settings/edit-hours",templateUrl:"./app/restaurant/restaSettings/restaEditHours.html",controller:"restaSettingsCtrl",controllerAs:"rsc"})}angular.module("waitrApp").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","USER_ROLES",t])}(),function(){angular.module("waitrApp")}(),function(){function t(t,e,r,n,a,o){function s(){u.currentUser=null,r.logout(),a.go("login")}function i(t){u.currentUser=t}var u=this;n.$on("currentUser",function(t,e){i(e)}),n.$on(e.notAuthorized,function(t){o.alert({title:"Unauthorized!",template:"Invalid access.",buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),n.$on(e.notAuthenticated,function(t,e){r.logout(),a.go("login");o.alert({title:"Unauthenticated!",template:e.data,buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),u.currentUser=null,u.logout=s}angular.module("waitrApp",["ionic","ngCordova","angularMoment"]).run(function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).constant("AUTH_EVENTS",{notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{user:"user",restaurant:"restaurant"}).constant("SERVER_URL","http://localhost:3000").run(function(t,e,r,n,a){var o=r.getUser();o&&n(function(){t.$broadcast("currentUser",o)}),t.$on("$stateChangeStart",function(n,o){if(o.data){var s=o.data.authorizedRoles;r.isAuthorized(s)||(n.preventDefault(),r.isAuthenticated()?(t.$broadcast(e.notAuthorized),a.go(a.$current,{},{reload:!0})):(t.$broadcast(e.notAuthenticated),a.go("login")))}})}).config(function(t){t.interceptors.push("authInterceptorService")}).controller("AppCtrl",["$rootScope","AUTH_EVENTS","authService","$scope","$state","$ionicPopup",t])}(),function(){function t(t,e,r,n){r.backButton.text("").icon("ion-ios7-arrow-left"),e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"app/login/login.template.html",controller:"LoginCtrl",controllerAs:"logCtrl"}).state("customer-sign-up",{url:"/customer-registration",templateUrl:"app/registration/custReg.template.html",controller:"RegistrationCtrl",controllerAs:"regCtrl"}).state("restaurant-sign-up",{url:"/restaurant-registration",templateUrl:"app/registration/restReg.template.html",controller:"RegistrationCtrl",controllerAs:"regCtrl"}).state("customer",{url:"/customer",abstract:!0,templateUrl:"./app/customer/custCustomer.html",controller:"custCustomerCtrl",controllerAs:"ccc",resolve:{currentUser:function(t,e){var r=t.getUser();return r?r:e.go("login")}}}).state("customer.home",{url:"/home",templateUrl:"./app/customer/home/custHome.html",controller:"custHomeCtrl",controllerAs:"chc"}).state("customer.restaurant",{url:"/home/restaurant/:restaurantId",templateUrl:"./app/customer/restaurant/custRestaurant.html",controller:"custRestaurantCtrl",controllerAs:"crc"}).state("customer.waitlistconfirm",{url:"/home/restaurant/:restaurantId/waitlist-confirm",templateUrl:"./app/customer/restaurant/custRestaurantConfirm.html",controller:"custWaitListConfirmCtrl",controllerAs:"cwlc"}).state("customer.settings",{url:"/settings",templateUrl:"./app/customer/settings/custSettings.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.menu",{url:"/home/restaurant/:restaurantId/menu",templateUrl:"./app/customer/menu/custRestaurantMenu.html",controller:"custRestaurantMenuCtrl",controllerAs:"cmc"}).state("customer.editContactInfo",{url:"/settings/edit-contact-info",templateUrl:"./app/customer/settings/custEditContactInfo.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.paymentMethods",{url:"/settings/payment-methods",templateUrl:"./app/customer/settings/custPaymentMethods.html",controller:"custSettingsCtrl",controllerAs:"csc"}).state("customer.waitlist",{url:"/waitlist",templateUrl:"./app/customer/waitlist/custWaitlist.html",controller:"custWaitlistCtrl",controllerAs:"cwc"}).state("restaurant",{url:"/restaurant",abstract:!0,templateUrl:"./app/restaurant/restaRestaurant.html",controller:"restaRestaurantCtrl",controllerAs:"rrc",resolve:{restaurantInfo:function(t,e,r){var n=t.getUser();return n&&n.restaurant_id?e.getCurrentRestaurant(n.restaurant_id).then(function(t){return{currentUser:n,restaurant:t}}):r.go("login")}}}).state("restaurant.home",{url:"/home",templateUrl:"./app/restaurant/restaHome/restaHome.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.addPerson",{url:"/home/add-person",templateUrl:"./app/restaurant/restaHome/restaAddPerson.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.editPerson",{url:"/home/edit-person/:waitlist/:person",templateUrl:"./app/restaurant/restaHome/restaEditPerson.html",controller:"restaEditCtrl",controllerAs:"rec"}).state("restaurant.profile",{url:"/profile",templateUrl:"./app/restaurant/restaProfile/restaProfile.html",controller:"restaProfileCtrl",controllerAs:"rpc"}).state("restaurant.menu",{url:"/profile/menu",templateUrl:"./app/restaurant/restaMenu/restaMenu.html",controller:"restaMenuCtrl",controllerAs:"rmc"}).state("restaurant.settings",{url:"/settings",templateUrl:"./app/restaurant/restaSettings/restaSettings.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editInfo",{url:"/settings/edit-Info",templateUrl:"./app/restaurant/restaSettings/restaEditInfo.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editContact",{url:"/settings/edit-contact",templateUrl:"./app/restaurant/restaSettings/restaEditContact.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editMenu",{url:"/settings/edit-menu",templateUrl:"./app/restaurant/restaEditMenu/restaEditMenu.html",controller:"restaEditMenuCtrl",controllerAs:"remc"}).state("restaurant.editHours",{url:"/settings/edit-hours",templateUrl:"./app/restaurant/restaSettings/restaEditHours.html",controller:"restaSettingsCtrl",controllerAs:"rsc"})}angular.module("waitrApp").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","USER_ROLES",t])}(),function(){function t(t,e,r,n,a){var o=this;o.currentUser=e}angular.module("waitrApp").controller("custCustomerCtrl",["$state","currentUser","userService","$timeout","$scope",t])}(),function(){function t(t,e,r){function n(r){t.login(r).then(function(t){a.credentials.email="",a.credentials.password="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")},function(t){console.log("Login error: "+t.data)})}var a=this;a.credentials={email:"",password:""},a.login=n}angular.module("waitrApp").controller("LoginCtrl",t),t.$inject=["authService","$state","$ionicPopup"]}(),function(){function t(t,e,r){function n(r){t.register(r).then(function(t){a.cust.firstName="",a.cust.lastName="",a.cust.email="",a.cust.password="",a.cust.phone="",a.rest.firstName="",a.rest.lastname="",a.rest.email="",a.rest.password="",a.rest.phone="",a.rest.restaurantName="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")},function(t){})}var a=this;a.cust={firstName:"",lastName:"",email:"",password:"",phone:""},a.rest={firstName:"",lastName:"",email:"",password:"",phone:"",restaurantName:""},a.register=n}angular.module("waitrApp").controller("RegistrationCtrl",t),t.$inject=["authService","$state","$ionicPopup"]}(),function(){function t(t,e,r,n){var a=this;a.currentUser=t.currentUser,a.restaurant=t.restaurant[0]}angular.module("waitrApp").controller("restaRestaurantCtrl",["restaurantInfo","restaurantService","$timeout","$scope",t])}(),function(){function t(t,e,r,n){function a(t){var e=n.getToken();return e&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+e),t}function o(n){return t.$broadcast({401:r.notAuthenticated,403:r.notAuthorized}[n.status],n),e.reject(n)}return{request:a,responseError:o}}angular.module("waitrApp").factory("authInterceptorService",t),t.$inject=["$rootScope","$q","AUTH_EVENTS","authTokenService"]}(),function(){function t(t,e,r,n,a,o){function s(a){var s=r.defer();return t.post(e+"/register",a).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return o.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function i(a){var s=r.defer();return t.post(e+"/login",a).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return o.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function u(){n.setToken()}function c(){return!!p()}function l(t){return angular.isArray(t)||(t=[t]),c()&&t.indexOf(p().role)!==-1}function m(t){return t?JSON.parse(atob(t.split(".")[1])):null}function p(){var t=n.getToken();return t?JSON.parse(atob(t.split(".")[1])):null}return{register:s,login:i,logout:u,isAuthenticated:c,isAuthorized:l,getUser:p}}angular.module("waitrApp").factory("authService",t),t.$inject=["$http","SERVER_URL","$q","authTokenService","$state","$rootScope"]}(),function(){function t(t){function e(e){return e?(t.localStorage.setItem("token",e),e):void t.localStorage.removeItem("token")}function r(){return t.localStorage.getItem("token")}return{setToken:e,getToken:r}}angular.module("waitrApp").factory("authTokenService",t),t.$inject=["$window"]}(),function(){function t(t,e){this.notification=function(r){return t.put(e+"/api/twilio",r).then(function(t){return t.data})},this.getRestaurants=function(){return t.get(e+"/api/restaurant").then(function(t){return t.data})},this.getCurrentRestaurant=function(r){return t.get(e+"/api/restaurant/"+r).then(function(t){return t.data})},this.updateRestaurant=function(r,n){return t.put(e+"/api/restaurant/"+r,n).then(function(t){return t.data})},this.updateRestaurantMenu=function(r,n){return t.put(e+"/api/restaurant/menu/add/"+r,n).then(function(t){return t.data})},this.deleteRestaurantMenuItem=function(r,n){return t.put(e+"/api/restaurant/menu/remove/"+r,n).then(function(t){return t.data})},this.getWaitlist=function(r){return t.get(e+"/api/waitlist/?restaurant_id="+r).then(function(t){return t.data})}}angular.module("waitrApp").service("restaurantService",["$http","SERVER_URL",t])}(),function(){function t(t,e){this.currentUser=function(r){return t({method:"GET",url:e+"/api/user/"+r}).then(function(t){return t.data})},this.updateUser=function(r,n){return t({method:"PUT",url:e+"/api/user/"+r,data:n}).then(function(t){return t.data})}}angular.module("waitrApp").service("userService",["$http","SERVER_URL",t])}(),function(){function t(t,e){var r=e+"/api/waitlist/";this.isValidPhone=function(t){return 10==t.length&&(t=parseInt(t),!!(t&&t>1e9))},this.maxPartySize=100,this.addAnonToWaitlist=function(e,n,a){var o={firstName:e.firstName,lastName:e.lastName,partySize:e.partySize,phone:e.phone,timeAdded:new Date,quotedTimeGiven:a,notes:e.notes};return e.user_id&&(o.user_id=e.user_id),t({method:"PUT",url:r+n+"/list",data:o}).then(function(t){return t.data})},this.getOneFromWaitlist=function(e,n){return t({method:"GET",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.removeFromWaitlist=function(e,n){return t({method:"DELETE",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.updateWaitlistEntry=function(e,n,a){return delete a._id,t({method:"PUT",url:r+n+"/list/"+e,data:a}).then(function(t){return t.data})},this.updateWaitTime=function(e,n){return t({method:"PUT",url:r+e,data:{quotedTime:n}}).then(function(t){return t.data.quotedTime})},this.getWaitlist=function(e){return t.get(r+"?restaurant_id="+e).then(function(t){return t.data})}}angular.module("waitrApp").service("waitlistService",t)}(),function(){function t(t,e){var r=this;r.reverse=!1,t.getRestaurants().then(function(t){e(function(){r.restaurantList=t},1e3)})}angular.module("waitrApp").controller("custHomeCtrl",["restaurantService","$timeout",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this;u.infoHoursToggle=!0,u.restaurantId=n.restaurantId,u.currentUser=i.ccc.currentUser,t.getCurrentRestaurant(u.restaurantId).then(function(t){u.restaurant=t[0]}),r.getWaitlist(u.restaurantId).then(function(t){u.customerEntries=t[0]}),u.userAddingToQ=function(){r.addAnonToWaitlist(u.currentUser,u.restaurant.waitlist_id).then(function(t){console.log("res is: ",t),a.nextViewOptions({disableBack:!0}),o.go("restaurant.home")})},u.callTel=function(){window.location.href="tel:"+u.restaurant.restaurantPhone},u.getWebsite=function(){return window.open(u.restaurant.restaurantWebsite,"_system","location=yes"),!1},u.goBack=function(){a.goBack()},u.infoHoursToggle=!0,u.showOnClick=function(t){u.infoHoursToggle=t}}angular.module("waitrApp").controller("custRestaurantCtrl",["restaurantService","userService","waitlistService","$stateParams","$ionicHistory","$state","$timeout","$scope",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this,c=t.restaurantId,l=io.connect("http://localhost:3000");u.currentUser=r.ccc.currentUser,a.getCurrentRestaurant(c).then(function(t){u.currRestObj=t}),u.userAddingToQ=function(t,e,a,c,m){var p={user_id:u.currentUser._id,firstName:t,lastName:e,partySize:a,phone:c,notes:m};n.addAnonToWaitlist(p,u.currRestObj[0].waitlist_id).then(function(t){console.log("res: ",t),l.emit("newPerson",t),i.nextViewOptions({disableBack:!0});var e={inWaitList:u.currRestObj[0].waitlist_id};s.updateUser(u.currentUser._id,e).then(function(t){r.ccc.currentUser.inWaitList=e.inWaitList,o.go("customer.waitlist")})})}}angular.module("waitrApp").controller("custWaitListConfirmCtrl",["$stateParams","$timeout","$scope","waitlistService","restaurantService","$state","userService","$ionicHistory",t])}(),function(){function t(t,e,r,n){var a=this;a.currentUser=n.ccc.currentUser,a.firstName=a.currentUser.firstName,a.lastName=a.currentUser.lastName,a.phone=a.currentUser.phone,a.email=a.currentUser.email,a.updateUser=function(r,o,s,i){var u={firstName:r,lastName:o,phone:s,email:i};t.updateUser(a.currentUser._id,u).then(function(t){n.ccc.currentUser=t,e.go("customer.settings")})}}angular.module("waitrApp").controller("custSettingsCtrl",["userService","$state","$timeout","$scope",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this,c=io.connect("http://localhost:3000");u.currentUser=n.ccc.currentUser,c.on("newPersonAdded",function(t){u.currentUser.inWaitList.list.push(t),n.$apply()}),c.on("deletedPerson",function(t){u.currentUser.inWaitList&&(u.currentUser.inWaitList.list.splice(t.pos,1),n.$apply())}),t.currentUser(u.currentUser._id).then(function(t){u.currentUser=t[0],e.getCurrentRestaurant(u.currentUser.inWaitList.restaurant_id).then(function(t){u.restaurant=t[0]})}),u.removeFromWaitlist=function(){for(var t=u.currentUser.inWaitList.list,e=0;e<t.length;e++)t[e].user_id==u.currentUser._id&&a.removeFromWaitlist(t[e]._id,u.currentUser.inWaitList._id).then(function(t){n.ccc.currentUser.inWaitList=void 0,c.emit("deletePerson",t),i.nextViewOptions({disableBack:!0}),s.go("customer.home")})},u.showRemovePopup=function(){var t=o.confirm({title:"Remove from waitlist",template:"WARNING: this will remove you from the list"});t.then(function(t){t&&u.removeFromWaitlist()})}}angular.module("waitrApp").controller("custWaitlistCtrl",["userService","restaurantService","$timeout","$scope","waitlistService","$ionicPopup","$state","$ionicHistory",t])}(),function(){function t(t,e,r,n){var a=this;a.restaurantId=e.restaurantId,a.menuTitle=null,t.getCurrentRestaurant(a.restaurantId).then(function(t){a.restaurant=t[0],a.groupedMenu=_.groupBy(a.restaurant.menu,"section")}),a.goBack=function(){r.goBack()},a.toggleSection=function(t){t===a.menuTitle?a.menuTitle=null:a.menuTitle=t}}angular.module("waitrApp").controller("custRestaurantMenuCtrl",["restaurantService","$stateParams","$ionicHistory","$state",t])}(),function(){function t(t,e,r,n,a,o,s){var i=io.connect("http://localhost:3000"),u=this;u.currentRestaurant=s.rrc.restaurant,t.getOneFromWaitlist(n.person,n.waitlist).then(function(t){u.person=t}),u.notification=function(){var t={phone:"+1"+u.person.phone,firstName:u.person.firstName,restaurant:u.currentRestaurant.restaurantName};console.log("this is the phone number",t.phone),o.notification(t)},u.submitEditedEntry=function(a){console.log("rec.person is: ",a),t.updateWaitlistEntry(n.person,n.waitlist,a).then(function(t){console.log("successfully updated entry!"),e.go("restaurant.home"),r.nextViewOptions({disableBack:!0})})};var c=function(){t.removeFromWaitlist(n.person,n.waitlist).then(function(t){i.emit("deletePerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")})};u.showCheckInPopup=function(){var t=a.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),c()):console.log("user does not want to check person in")}),e.go("restaurant.home")},u.showCheckInPopup=function(){var t=a.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),c()):console.log("user does not want to check person in")})},u.showRemovePopup=function(){var t=a.confirm({title:"Remove from waitlist",template:"WARNING: this will remove the user from the waitlist entirely"});t.then(function(t){t?(console.log("user wants to remove person from list"),c()):console.log("user does not want to remove person from list")})}}angular.module("waitrApp").controller("restaEditCtrl",["waitlistService","$state","$ionicHistory","$stateParams","$ionicPopup","restaurantService","$scope",t])}(),function(){function t(t,e,r,n,a){var o=this;o.newPerson={};var s=io.connect("http://localhost:3000");s.on("newPersonAdded",function(t){console.log("socket data is: ",t),o.customerEntries.list.push(t),n.$apply()}),s.on("deletedPerson",function(t){console.log("hitting deletedPerson with data: ",t),o.customerEntries.list.splice(t.pos,1),n.$apply()}),moment.locale("en",{relativeTime:{future:"in %s",past:"%s",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mon",y:"1y",yy:"%dy"}}),o.currentUser=n.rrc.currentUser,t.getWaitlist(o.currentUser.restaurant_id).then(function(t){o.customerEntries=t[0]}),o.addPersonToQ=function(n){n.firstName&&n.lastName&&n.phone&&n.partySize?t.isValidPhone(n.phone)&&n.partySize<t.maxPartySize?t.addAnonToWaitlist(n,o.customerEntries._id,o.customerEntries.quotedTime).then(function(t){s.emit("newPerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")}):a.show({title:"Invalid Data",template:"Phone number must be 10 digits and party size cannot exceed 100<br/>Ex. 1234567890",buttons:[{text:"OK"}]}):a.show({title:"Invalid Data",template:"Fill out all fields before pressing 'Submit'",buttons:[{text:"OK"}]})},o.showWaitTimeModal=function(e){console.log(e),o.time=e;a.confirm({template:'<label class="item item-input"><input type="tel" ng-model="rhc.time" min="0"></label>',title:"Enter Wait Time",scope:n,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(t){return o.time=parseInt(o.time),o.time<0||isNaN(o.time)?void t.preventDefault():o.time}}]}).then(function(e){e>=0&&t.updateWaitTime(o.customerEntries._id,e).then(function(t){o.customerEntries.quotedTime=t})})}}angular.module("waitrApp").controller("restaHomeCtrl",["waitlistService","$state","$ionicHistory","$scope","$ionicPopup",t])}(),function(){function t(t,e,r,n,a){var o=this;o.restaurant=e.rrc.restaurant,o.menuTitle=null,o.groupedMenu=_.groupBy(o.restaurant.menu,"section"),o.newMenuItem,o.newSection,o.goBack=function(){a.goBack()},o.toggleSection=function(t){t===o.menuTitle?o.menuTitle=null:o.menuTitle=t},o.updateRestaurantMenu=function(){t.confirm({templateUrl:"./app/restaurant/restaEditMenu/restaAddMenuItem.html",scope:e}).then(function(t){t&&("new"===o.newMenuItem.section&&(o.newMenuItem.section=o.newSection),r.updateRestaurantMenu(o.restaurant._id,o.newMenuItem).then(function(t){console.log(t),o.groupedMenu=_.groupBy(t.menu,"section")}))})},o.deleteItem=function(n){t.confirm({template:"<h3>Are you sure?</h3>",title:"Deleting item",scope:e}).then(function(t){t&&r.deleteRestaurantMenuItem(o.restaurant._id,n).then(function(t){o.groupedMenu=_.groupBy(t.menu,"section")})})}}angular.module("waitrApp").controller("restaEditMenuCtrl",["$ionicPopup","$scope","restaurantService","$state","$ionicHistory",t])}(),function(){function t(t,e){var r=this;r.menuTitle=null,r.restaurant=t.rrc.restaurant,r.groupedMenu=_.groupBy(r.restaurant.menu,"section"),r.goBack=function(){e.goBack()},r.toggleSection=function(t){t===r.menuTitle?r.menuTitle=null:r.menuTitle=t}}angular.module("waitrApp").controller("restaMenuCtrl",["$scope","$ionicHistory",t])}(),function(){function t(t,e,r){var n=this;n.infoHoursToggle=!0,n.currentUser=e.rrc.currentUser,n.restaurant=e.rrc.restaurant,t.getWaitlist(n.currentUser.restaurant_id).then(function(t){n.customerEntries=t[0]}),n.callTel=function(){window.location.href="tel:"+n.restaurant.restaurantPhone},n.getWebsite=function(){return window.open(n.restaurant.restaurantWebsite,"_system","location=yes"),!1},n.infoHoursToggle=!0,n.showOnClick=function(t){n.infoHoursToggle=t}}angular.module("waitrApp").controller("restaProfileCtrl",["waitlistService","$scope","userService",t])}(),function(){function t(t,e,r){var n=this;n.currentUserID=e.rrc.currentUser.restaurant_id,n.restaurant=e.rrc.restaurant,n.restaurant.hours.monday.openTime=new Date(n.restaurant.hours.monday.openTime),n.restaurant.hours.monday.closeTime=new Date(n.restaurant.hours.monday.closeTime),n.restaurant.hours.tuesday.openTime=new Date(n.restaurant.hours.tuesday.openTime),n.restaurant.hours.tuesday.closeTime=new Date(n.restaurant.hours.tuesday.closeTime),n.restaurant.hours.wednesday.openTime=new Date(n.restaurant.hours.wednesday.openTime),n.restaurant.hours.wednesday.closeTime=new Date(n.restaurant.hours.wednesday.closeTime),n.restaurant.hours.thursday.openTime=new Date(n.restaurant.hours.thursday.openTime),n.restaurant.hours.thursday.closeTime=new Date(n.restaurant.hours.thursday.closeTime),n.restaurant.hours.friday.openTime=new Date(n.restaurant.hours.friday.openTime),n.restaurant.hours.friday.closeTime=new Date(n.restaurant.hours.friday.closeTime),n.restaurant.hours.saturday.openTime=new Date(n.restaurant.hours.saturday.openTime),n.restaurant.hours.saturday.closeTime=new Date(n.restaurant.hours.saturday.closeTime),n.restaurant.hours.sunday.openTime=new Date(n.restaurant.hours.sunday.openTime),n.restaurant.hours.sunday.closeTime=new Date(n.restaurant.hours.sunday.closeTime),n.updateRestaurant=function(e){t.updateRestaurant(n.restaurant._id,e)}}angular.module("waitrApp").controller("restaSettingsCtrl",["restaurantService","$scope","$filter",t]).directive("formattedTime",function(t){return{require:"?ngModel",link:function(t,e,r,n){n&&"time"===r.type&&n.$formatters.unshift(function(t){return t.replace(/:[0-9]+.[0-9]+$/,"")})}}})}(),function(){function t(t,e,r,n,a){var o=this;o.currentUser=e}angular.module("waitrApp").controller("custCustomerCtrl",["$state","currentUser","userService","$timeout","$scope",t])}(),function(){function t(t,e,r){function n(r){t.register(r).then(function(t){a.cust.firstName="",a.cust.lastName="",a.cust.email="",a.cust.password="",a.cust.phone="",a.rest.firstName="",a.rest.lastname="",a.rest.email="",a.rest.password="",a.rest.phone="",a.rest.restaurantName="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")},function(t){})}var a=this;a.cust={firstName:"",lastName:"",email:"",password:"",phone:""},a.rest={firstName:"",lastName:"",email:"",password:"",phone:"",restaurantName:""},a.register=n}angular.module("waitrApp").controller("RegistrationCtrl",t),t.$inject=["authService","$state","$ionicPopup"]}(),function(){function t(t,e,r){function n(r){t.login(r).then(function(t){a.credentials.email="",a.credentials.password="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")},function(t){console.log("Login error: "+t.data)})}var a=this;a.credentials={email:"",password:""},a.login=n}angular.module("waitrApp").controller("LoginCtrl",t),t.$inject=["authService","$state","$ionicPopup"]}(),function(){function t(t,e,r,n){function a(t){var e=n.getToken();return e&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+e),t}function o(n){return t.$broadcast({401:r.notAuthenticated,403:r.notAuthorized}[n.status],n),e.reject(n)}return{request:a,responseError:o}}angular.module("waitrApp").factory("authInterceptorService",t),t.$inject=["$rootScope","$q","AUTH_EVENTS","authTokenService"]}(),function(){function t(t,e,r,n,a,o){function s(a){var s=r.defer();return t.post(e+"/register",a).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return o.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function i(a){var s=r.defer();return t.post(e+"/login",a).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return o.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function u(){n.setToken()}function c(){return!!p()}function l(t){return angular.isArray(t)||(t=[t]),c()&&t.indexOf(p().role)!==-1}function m(t){return t?JSON.parse(atob(t.split(".")[1])):null}function p(){var t=n.getToken();return t?JSON.parse(atob(t.split(".")[1])):null}return{register:s,login:i,logout:u,isAuthenticated:c,isAuthorized:l,getUser:p}}angular.module("waitrApp").factory("authService",t),t.$inject=["$http","SERVER_URL","$q","authTokenService","$state","$rootScope"]}(),function(){function t(t){function e(e){return e?(t.localStorage.setItem("token",e),e):void t.localStorage.removeItem("token")}function r(){return t.localStorage.getItem("token")}return{setToken:e,getToken:r}}angular.module("waitrApp").factory("authTokenService",t),t.$inject=["$window"]}(),function(){function t(t,e){this.notification=function(r){return t.put(e+"/api/twilio",r).then(function(t){return t.data})},this.getRestaurants=function(){return t.get(e+"/api/restaurant").then(function(t){return t.data})},this.getCurrentRestaurant=function(r){return t.get(e+"/api/restaurant/"+r).then(function(t){return t.data})},this.updateRestaurant=function(r,n){return t.put(e+"/api/restaurant/"+r,n).then(function(t){return t.data})},this.updateRestaurantMenu=function(r,n){return t.put(e+"/api/restaurant/menu/add/"+r,n).then(function(t){return t.data})},this.deleteRestaurantMenuItem=function(r,n){return t.put(e+"/api/restaurant/menu/remove/"+r,n).then(function(t){return t.data})},this.getWaitlist=function(r){
return t.get(e+"/api/waitlist/?restaurant_id="+r).then(function(t){return t.data})}}angular.module("waitrApp").service("restaurantService",["$http","SERVER_URL",t])}(),function(){function t(t,e){this.currentUser=function(r){return t({method:"GET",url:e+"/api/user/"+r}).then(function(t){return t.data})},this.updateUser=function(r,n){return t({method:"PUT",url:e+"/api/user/"+r,data:n}).then(function(t){return t.data})}}angular.module("waitrApp").service("userService",["$http","SERVER_URL",t])}(),function(){function t(t,e){var r=e+"/api/waitlist/";this.isValidPhone=function(t){return 10==t.length&&(t=parseInt(t),!!(t&&t>1e9))},this.maxPartySize=100,this.addAnonToWaitlist=function(e,n,a){var o={firstName:e.firstName,lastName:e.lastName,partySize:e.partySize,phone:e.phone,timeAdded:new Date,quotedTimeGiven:a,notes:e.notes};return e.user_id&&(o.user_id=e.user_id),t({method:"PUT",url:r+n+"/list",data:o}).then(function(t){return t.data})},this.getOneFromWaitlist=function(e,n){return t({method:"GET",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.removeFromWaitlist=function(e,n){return t({method:"DELETE",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.updateWaitlistEntry=function(e,n,a){return delete a._id,t({method:"PUT",url:r+n+"/list/"+e,data:a}).then(function(t){return t.data})},this.updateWaitTime=function(e,n){return t({method:"PUT",url:r+e,data:{quotedTime:n}}).then(function(t){return t.data.quotedTime})},this.getWaitlist=function(e){return t.get(r+"?restaurant_id="+e).then(function(t){return t.data})}}angular.module("waitrApp").service("waitlistService",t)}(),function(){function t(t,e,r,n){var a=this;a.currentUser=t.currentUser,a.restaurant=t.restaurant[0]}angular.module("waitrApp").controller("restaRestaurantCtrl",["restaurantInfo","restaurantService","$timeout","$scope",t])}(),function(){function t(t,e){var r=this;r.reverse=!1,t.getRestaurants().then(function(t){e(function(){r.restaurantList=t},1e3)})}angular.module("waitrApp").controller("custHomeCtrl",["restaurantService","$timeout",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this;u.infoHoursToggle=!0,u.restaurantId=n.restaurantId,u.currentUser=i.ccc.currentUser,t.getCurrentRestaurant(u.restaurantId).then(function(t){u.restaurant=t[0]}),r.getWaitlist(u.restaurantId).then(function(t){u.customerEntries=t[0]}),u.userAddingToQ=function(){r.addAnonToWaitlist(u.currentUser,u.restaurant.waitlist_id).then(function(t){console.log("res is: ",t),a.nextViewOptions({disableBack:!0}),o.go("restaurant.home")})},u.callTel=function(){window.location.href="tel:"+u.restaurant.restaurantPhone},u.getWebsite=function(){return window.open(u.restaurant.restaurantWebsite,"_system","location=yes"),!1},u.goBack=function(){a.goBack()},u.infoHoursToggle=!0,u.showOnClick=function(t){u.infoHoursToggle=t}}angular.module("waitrApp").controller("custRestaurantCtrl",["restaurantService","userService","waitlistService","$stateParams","$ionicHistory","$state","$timeout","$scope",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this,c=t.restaurantId,l=io.connect("http://localhost:3000");u.currentUser=r.ccc.currentUser,a.getCurrentRestaurant(c).then(function(t){u.currRestObj=t}),u.userAddingToQ=function(t,e,a,c,m){var p={user_id:u.currentUser._id,firstName:t,lastName:e,partySize:a,phone:c,notes:m};n.addAnonToWaitlist(p,u.currRestObj[0].waitlist_id).then(function(t){console.log("res: ",t),l.emit("newPerson",t),i.nextViewOptions({disableBack:!0});var e={inWaitList:u.currRestObj[0].waitlist_id};s.updateUser(u.currentUser._id,e).then(function(t){r.ccc.currentUser.inWaitList=e.inWaitList,o.go("customer.waitlist")})})}}angular.module("waitrApp").controller("custWaitListConfirmCtrl",["$stateParams","$timeout","$scope","waitlistService","restaurantService","$state","userService","$ionicHistory",t])}(),function(){function t(t,e,r,n){var a=this;a.restaurantId=e.restaurantId,a.menuTitle=null,t.getCurrentRestaurant(a.restaurantId).then(function(t){a.restaurant=t[0],a.groupedMenu=_.groupBy(a.restaurant.menu,"section")}),a.goBack=function(){r.goBack()},a.toggleSection=function(t){t===a.menuTitle?a.menuTitle=null:a.menuTitle=t}}angular.module("waitrApp").controller("custRestaurantMenuCtrl",["restaurantService","$stateParams","$ionicHistory","$state",t])}(),function(){function t(t,e,r,n,a,o,s,i){var u=this,c=io.connect("http://localhost:3000");u.currentUser=n.ccc.currentUser,c.on("newPersonAdded",function(t){u.currentUser.inWaitList.list.push(t),n.$apply()}),c.on("deletedPerson",function(t){u.currentUser.inWaitList&&(u.currentUser.inWaitList.list.splice(t.pos,1),n.$apply())}),t.currentUser(u.currentUser._id).then(function(t){u.currentUser=t[0],e.getCurrentRestaurant(u.currentUser.inWaitList.restaurant_id).then(function(t){u.restaurant=t[0]})}),u.removeFromWaitlist=function(){for(var t=u.currentUser.inWaitList.list,e=0;e<t.length;e++)t[e].user_id==u.currentUser._id&&a.removeFromWaitlist(t[e]._id,u.currentUser.inWaitList._id).then(function(t){n.ccc.currentUser.inWaitList=void 0,c.emit("deletePerson",t),i.nextViewOptions({disableBack:!0}),s.go("customer.home")})},u.showRemovePopup=function(){var t=o.confirm({title:"Remove from waitlist",template:"WARNING: this will remove you from the list"});t.then(function(t){t&&u.removeFromWaitlist()})}}angular.module("waitrApp").controller("custWaitlistCtrl",["userService","restaurantService","$timeout","$scope","waitlistService","$ionicPopup","$state","$ionicHistory",t])}(),function(){function t(t,e,r,n){var a=this;a.currentUser=n.ccc.currentUser,a.firstName=a.currentUser.firstName,a.lastName=a.currentUser.lastName,a.phone=a.currentUser.phone,a.email=a.currentUser.email,a.updateUser=function(r,o,s,i){var u={firstName:r,lastName:o,phone:s,email:i};t.updateUser(a.currentUser._id,u).then(function(t){n.ccc.currentUser=t,e.go("customer.settings")})}}angular.module("waitrApp").controller("custSettingsCtrl",["userService","$state","$timeout","$scope",t])}(),function(){function t(t,e,r,n,a){var o=this;o.restaurant=e.rrc.restaurant,o.menuTitle=null,o.groupedMenu=_.groupBy(o.restaurant.menu,"section"),o.newMenuItem,o.newSection,o.goBack=function(){a.goBack()},o.toggleSection=function(t){t===o.menuTitle?o.menuTitle=null:o.menuTitle=t},o.updateRestaurantMenu=function(){t.confirm({templateUrl:"./app/restaurant/restaEditMenu/restaAddMenuItem.html",scope:e}).then(function(t){t&&("new"===o.newMenuItem.section&&(o.newMenuItem.section=o.newSection),r.updateRestaurantMenu(o.restaurant._id,o.newMenuItem).then(function(t){console.log(t),o.groupedMenu=_.groupBy(t.menu,"section")}))})},o.deleteItem=function(n){t.confirm({template:"<h3>Are you sure?</h3>",title:"Deleting item",scope:e}).then(function(t){t&&r.deleteRestaurantMenuItem(o.restaurant._id,n).then(function(t){o.groupedMenu=_.groupBy(t.menu,"section")})})}}angular.module("waitrApp").controller("restaEditMenuCtrl",["$ionicPopup","$scope","restaurantService","$state","$ionicHistory",t])}(),function(){function t(t,e){var r=this;r.menuTitle=null,r.restaurant=t.rrc.restaurant,r.groupedMenu=_.groupBy(r.restaurant.menu,"section"),r.goBack=function(){e.goBack()},r.toggleSection=function(t){t===r.menuTitle?r.menuTitle=null:r.menuTitle=t}}angular.module("waitrApp").controller("restaMenuCtrl",["$scope","$ionicHistory",t])}(),function(){function t(t,e,r,n,a,o,s){var i=io.connect("http://localhost:3000"),u=this;u.currentRestaurant=s.rrc.restaurant,t.getOneFromWaitlist(n.person,n.waitlist).then(function(t){u.person=t}),u.notification=function(){var t={phone:"+1"+u.person.phone,firstName:u.person.firstName,restaurant:u.currentRestaurant.restaurantName};console.log("this is the phone number",t.phone),o.notification(t)},u.submitEditedEntry=function(a){console.log("rec.person is: ",a),t.updateWaitlistEntry(n.person,n.waitlist,a).then(function(t){console.log("successfully updated entry!"),e.go("restaurant.home"),r.nextViewOptions({disableBack:!0})})};var c=function(){t.removeFromWaitlist(n.person,n.waitlist).then(function(t){i.emit("deletePerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")})};u.showCheckInPopup=function(){var t=a.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),c()):console.log("user does not want to check person in")}),e.go("restaurant.home")},u.showCheckInPopup=function(){var t=a.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),c()):console.log("user does not want to check person in")})},u.showRemovePopup=function(){var t=a.confirm({title:"Remove from waitlist",template:"WARNING: this will remove the user from the waitlist entirely"});t.then(function(t){t?(console.log("user wants to remove person from list"),c()):console.log("user does not want to remove person from list")})}}angular.module("waitrApp").controller("restaEditCtrl",["waitlistService","$state","$ionicHistory","$stateParams","$ionicPopup","restaurantService","$scope",t])}(),function(){function t(t,e,r,n,a){var o=this;o.newPerson={};var s=io.connect("http://localhost:3000");s.on("newPersonAdded",function(t){console.log("socket data is: ",t),o.customerEntries.list.push(t),n.$apply()}),s.on("deletedPerson",function(t){console.log("hitting deletedPerson with data: ",t),o.customerEntries.list.splice(t.pos,1),n.$apply()}),moment.locale("en",{relativeTime:{future:"in %s",past:"%s",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mon",y:"1y",yy:"%dy"}}),o.currentUser=n.rrc.currentUser,t.getWaitlist(o.currentUser.restaurant_id).then(function(t){o.customerEntries=t[0]}),o.addPersonToQ=function(n){n.firstName&&n.lastName&&n.phone&&n.partySize?t.isValidPhone(n.phone)&&n.partySize<t.maxPartySize?t.addAnonToWaitlist(n,o.customerEntries._id,o.customerEntries.quotedTime).then(function(t){s.emit("newPerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")}):a.show({title:"Invalid Data",template:"Phone number must be 10 digits and party size cannot exceed 100<br/>Ex. 1234567890",buttons:[{text:"OK"}]}):a.show({title:"Invalid Data",template:"Fill out all fields before pressing 'Submit'",buttons:[{text:"OK"}]})},o.showWaitTimeModal=function(e){console.log(e),o.time=e;a.confirm({template:'<label class="item item-input"><input type="tel" ng-model="rhc.time" min="0"></label>',title:"Enter Wait Time",scope:n,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(t){return o.time=parseInt(o.time),o.time<0||isNaN(o.time)?void t.preventDefault():o.time}}]}).then(function(e){e>=0&&t.updateWaitTime(o.customerEntries._id,e).then(function(t){o.customerEntries.quotedTime=t})})}}angular.module("waitrApp").controller("restaHomeCtrl",["waitlistService","$state","$ionicHistory","$scope","$ionicPopup",t])}(),function(){function t(t,e,r){var n=this;n.infoHoursToggle=!0,n.currentUser=e.rrc.currentUser,n.restaurant=e.rrc.restaurant,t.getWaitlist(n.currentUser.restaurant_id).then(function(t){n.customerEntries=t[0]}),n.callTel=function(){window.location.href="tel:"+n.restaurant.restaurantPhone},n.getWebsite=function(){return window.open(n.restaurant.restaurantWebsite,"_system","location=yes"),!1},n.infoHoursToggle=!0,n.showOnClick=function(t){n.infoHoursToggle=t}}angular.module("waitrApp").controller("restaProfileCtrl",["waitlistService","$scope","userService",t])}(),function(){function t(t,e,r){var n=this;n.currentUserID=e.rrc.currentUser.restaurant_id,n.restaurant=e.rrc.restaurant,n.restaurant.hours.monday.openTime=new Date(n.restaurant.hours.monday.openTime),n.restaurant.hours.monday.closeTime=new Date(n.restaurant.hours.monday.closeTime),n.restaurant.hours.tuesday.openTime=new Date(n.restaurant.hours.tuesday.openTime),n.restaurant.hours.tuesday.closeTime=new Date(n.restaurant.hours.tuesday.closeTime),n.restaurant.hours.wednesday.openTime=new Date(n.restaurant.hours.wednesday.openTime),n.restaurant.hours.wednesday.closeTime=new Date(n.restaurant.hours.wednesday.closeTime),n.restaurant.hours.thursday.openTime=new Date(n.restaurant.hours.thursday.openTime),n.restaurant.hours.thursday.closeTime=new Date(n.restaurant.hours.thursday.closeTime),n.restaurant.hours.friday.openTime=new Date(n.restaurant.hours.friday.openTime),n.restaurant.hours.friday.closeTime=new Date(n.restaurant.hours.friday.closeTime),n.restaurant.hours.saturday.openTime=new Date(n.restaurant.hours.saturday.openTime),n.restaurant.hours.saturday.closeTime=new Date(n.restaurant.hours.saturday.closeTime),n.restaurant.hours.sunday.openTime=new Date(n.restaurant.hours.sunday.openTime),n.restaurant.hours.sunday.closeTime=new Date(n.restaurant.hours.sunday.closeTime),n.updateRestaurant=function(e){t.updateRestaurant(n.restaurant._id,e)}}angular.module("waitrApp").controller("restaSettingsCtrl",["restaurantService","$scope","$filter",t]).directive("formattedTime",function(t){return{require:"?ngModel",link:function(t,e,r,n){n&&"time"===r.type&&n.$formatters.unshift(function(t){return t.replace(/:[0-9]+.[0-9]+$/,"")})}}})}();
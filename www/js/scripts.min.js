"use strict";!function(){angular.module("waitrApp")}(),function(){function t(t,e,r,n,o,a){function s(){u.currentUser=null,r.logout(),o.go("login")}function i(t){u.currentUser=t}var u=this;n.$on("currentUser",function(t,e){i(e)}),n.$on(e.notAuthorized,function(t){a.alert({title:"Unauthorized!",template:"Invalid access.",buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),n.$on(e.notAuthenticated,function(t,e){r.logout(),o.go("login");a.alert({title:"Unauthenticated!",template:e.data,buttons:[{text:"<b>OK</b>",type:"button-energized"}]})}),u.currentUser=null,u.logout=s}angular.module("waitrApp",["ionic","ngCordova","angularMoment"]).run(function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).constant("AUTH_EVENTS",{notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{user:"user",restaurant:"restaurant"}).constant("SERVER_URL","http://localhost:3000").run(function(t,e,r,n,o){var a=r.getUser();a&&n(function(){t.$broadcast("currentUser",a)}),t.$on("$stateChangeStart",function(n,a){if(a.data){var s=a.data.authorizedRoles;r.isAuthorized(s)||(n.preventDefault(),r.isAuthenticated()?(t.$broadcast(e.notAuthorized),o.go(o.$current,{},{reload:!0})):(t.$broadcast(e.notAuthenticated),o.go("login")))}})}).config(function(t){t.interceptors.push("authInterceptorService")}).controller("AppCtrl",["$rootScope","AUTH_EVENTS","authService","$scope","$state","$ionicPopup",t])}(),function(){function t(t,e,r,n){r.backButton.text("").icon("ion-ios7-arrow-left"),e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"logCtrl"}).state("customer-sign-up",{url:"/customer-registration",templateUrl:"app/registration/customer-registration.html",controller:"RegistrationController",controllerAs:"regCtrl"}).state("restaurant-sign-up",{url:"/restaurant-registration",templateUrl:"app/registration/restaurant-registration.html",controller:"RegistrationController",controllerAs:"regCtrl"}).state("customer",{url:"/customer",abstract:!0,templateUrl:"./app/customer/customer.html",controller:"CustomerController",controllerAs:"ccc",resolve:{currentUser:function(t,e){var r=t.getUser();return r?r:e.go("login")}}}).state("customer.home",{url:"/home",templateUrl:"./app/customer/home/customer-home.html",controller:"CustomerHomeController",controllerAs:"chc"}).state("customer.restaurant",{url:"/home/restaurant/:restaurantId",templateUrl:"./app/customer/restaurant/customer-restaurant.html",controller:"CustomerRestaurantController",controllerAs:"crc"}).state("customer.waitlistconfirm",{url:"/home/restaurant/:restaurantId/waitlist-confirm",templateUrl:"./app/customer/restaurant/customer-waitlist-confirm.html",controller:"CustomerWaitlistConfirmController",controllerAs:"cwlc"}).state("customer.settings",{url:"/settings",templateUrl:"./app/customer/settings/customer-settings.html",controller:"CustomerSettingsController",controllerAs:"csc"}).state("customer.menu",{url:"/home/restaurant/:restaurantId/menu",templateUrl:"./app/customer/menu/customer-menu.html",controller:"CustomerMenuController",controllerAs:"cmc"}).state("customer.editContactInfo",{url:"/settings/edit-contact-info",templateUrl:"./app/customer/settings/customer-edit-contact.html",controller:"CustomerSettingsController",controllerAs:"csc"}).state("customer.waitlist",{url:"/waitlist",templateUrl:"./app/customer/waitlist/customer-waitlist.html",controller:"CustomerWaitlistController",controllerAs:"cwc"}).state("restaurant",{url:"/restaurant",abstract:!0,templateUrl:"./app/restaurant/restaRestaurant.html",controller:"restaRestaurantCtrl",controllerAs:"rrc",resolve:{restaurantInfo:function(t,e,r){var n=t.getUser();return n&&n.restaurant_id?e.getCurrentRestaurant(n.restaurant_id).then(function(t){return{currentUser:n,restaurant:t}}):r.go("login")}}}).state("restaurant.home",{url:"/home",templateUrl:"./app/restaurant/restaHome/restaHome.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.addPerson",{url:"/home/add-person",templateUrl:"./app/restaurant/restaHome/restaAddPerson.html",controller:"restaHomeCtrl",controllerAs:"rhc"}).state("restaurant.editPerson",{url:"/home/edit-person/:waitlist/:person",templateUrl:"./app/restaurant/restaHome/restaEditPerson.html",controller:"restaEditCtrl",controllerAs:"rec"}).state("restaurant.profile",{url:"/profile",templateUrl:"./app/restaurant/restaProfile/restaProfile.html",controller:"restaProfileCtrl",controllerAs:"rpc"}).state("restaurant.menu",{url:"/profile/menu",templateUrl:"./app/restaurant/restaMenu/restaMenu.html",controller:"restaMenuCtrl",controllerAs:"rmc"}).state("restaurant.settings",{url:"/settings",templateUrl:"./app/restaurant/restaSettings/restaSettings.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editInfo",{url:"/settings/edit-Info",templateUrl:"./app/restaurant/restaSettings/restaEditInfo.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editContact",{url:"/settings/edit-contact",templateUrl:"./app/restaurant/restaSettings/restaEditContact.html",controller:"restaSettingsCtrl",controllerAs:"rsc"}).state("restaurant.editMenu",{url:"/settings/edit-menu",templateUrl:"./app/restaurant/restaEditMenu/restaEditMenu.html",controller:"restaEditMenuCtrl",controllerAs:"remc"}).state("restaurant.editHours",{url:"/settings/edit-hours",templateUrl:"./app/restaurant/restaSettings/restaEditHours.html",controller:"restaSettingsCtrl",controllerAs:"rsc"})}angular.module("waitrApp").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","USER_ROLES",t])}(),function(){function t(t){var e=this;e.currentUser=t}angular.module("waitrApp").controller("CustomerController",["currentUser",t])}(),function(){function t(t,e){var r=this;r.credentials={email:"",password:""},r.login=function(n){t.login(n).then(function(t){r.credentials.email="",r.credentials.password="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")})}}angular.module("waitrApp").controller("LoginController",["authService","$state",t])}(),function(){function t(t,e){var r=this;r.cust={firstName:"",lastName:"",email:"",password:"",phone:""},r.rest={firstName:"",lastName:"",email:"",password:"",phone:"",restaurantName:""},r.register=function(n){t.register(n).then(function(t){r.cust.firstName="",r.cust.lastName="",r.cust.email="",r.cust.password="",r.cust.phone="",r.rest.firstName="",r.rest.lastname="",r.rest.email="",r.rest.password="",r.rest.phone="",r.rest.restaurantName="","user"===t.role&&e.go("customer.home"),"restaurant"===t.role&&e.go("restaurant.home")})}}angular.module("waitrApp").controller("RegistrationController",["authService","$state",t])}(),function(){function t(t,e,r,n){var o=this;o.currentUser=t.currentUser,o.restaurant=t.restaurant[0]}angular.module("waitrApp").controller("restaRestaurantCtrl",["restaurantInfo","restaurantService","$timeout","$scope",t])}(),function(){function t(t,e,r,n){function o(t){var e=n.getToken();return e&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+e),t}function a(n){return t.$broadcast({401:r.notAuthenticated,403:r.notAuthorized}[n.status],n),e.reject(n)}return{request:o,responseError:a}}angular.module("waitrApp").factory("authInterceptorService",t),t.$inject=["$rootScope","$q","AUTH_EVENTS","authTokenService"]}(),function(){function t(t,e,r,n,o,a){function s(o){var s=r.defer();return t.post(e+"/register",o).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return a.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function i(o){var s=r.defer();return t.post(e+"/login",o).then(function(t){n.setToken(t.data.token);var e=m(t.data.token);return a.$broadcast("currentUser",e),s.resolve(e)},function(t){return s.reject(t)}),s.promise}function u(){n.setToken()}function l(){return!!p()}function c(t){return angular.isArray(t)||(t=[t]),l()&&t.indexOf(p().role)!==-1}function m(t){return t?JSON.parse(atob(t.split(".")[1])):null}function p(){var t=n.getToken();return t?JSON.parse(atob(t.split(".")[1])):null}return{register:s,login:i,logout:u,isAuthenticated:l,isAuthorized:c,getUser:p}}angular.module("waitrApp").factory("authService",t),t.$inject=["$http","SERVER_URL","$q","authTokenService","$state","$rootScope"]}(),function(){function t(t){function e(e){return e?(t.localStorage.setItem("token",e),e):void t.localStorage.removeItem("token")}function r(){return t.localStorage.getItem("token")}return{setToken:e,getToken:r}}angular.module("waitrApp").factory("authTokenService",t),t.$inject=["$window"]}(),function(){function t(t,e){this.notification=function(r){return t.put(e+"/api/twilio",r).then(function(t){return t.data})},this.getRestaurants=function(){return t.get(e+"/api/restaurant").then(function(t){return t.data})},this.getCurrentRestaurant=function(r){return t.get(e+"/api/restaurant/"+r).then(function(t){return t.data})},this.updateRestaurant=function(r,n){return t.put(e+"/api/restaurant/"+r,n).then(function(t){return t.data})},this.updateRestaurantMenu=function(r,n){return t.put(e+"/api/restaurant/menu/add/"+r,n).then(function(t){return t.data})},this.deleteRestaurantMenuItem=function(r,n){return t.put(e+"/api/restaurant/menu/remove/"+r,n).then(function(t){return t.data})},this.getWaitlist=function(r){return t.get(e+"/api/waitlist/?restaurant_id="+r).then(function(t){return t.data})}}angular.module("waitrApp").service("restaurantService",["$http","SERVER_URL",t])}(),function(){function t(t,e){this.currentUser=function(r){return t({method:"GET",url:e+"/api/user/"+r}).then(function(t){return t.data})},this.updateUser=function(r,n){return t({method:"PUT",url:e+"/api/user/"+r,data:n}).then(function(t){return t.data})}}angular.module("waitrApp").service("userService",["$http","SERVER_URL",t])}(),function(){function t(t,e){var r=e+"/api/waitlist/";this.isValidPhone=function(t){return 10==t.length&&(t=parseInt(t),!!(t&&t>1e9))},this.maxPartySize=100,this.addAnonToWaitlist=function(e,n,o){var a={firstName:e.firstName,lastName:e.lastName,partySize:e.partySize,phone:e.phone,timeAdded:new Date,quotedTimeGiven:o,notes:e.notes};return e.user_id&&(a.user_id=e.user_id),t({method:"PUT",url:r+n+"/list",data:a}).then(function(t){return t.data})},this.getOneFromWaitlist=function(e,n){return t({method:"GET",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.removeFromWaitlist=function(e,n){return t({method:"DELETE",url:r+n+"/list/"+e}).then(function(t){return t.data})},this.updateWaitlistEntry=function(e,n,o){return delete o._id,t({method:"PUT",url:r+n+"/list/"+e,data:o}).then(function(t){return t.data})},this.updateWaitTime=function(e,n){return t({method:"PUT",url:r+e,data:{quotedTime:n}}).then(function(t){return t.data.quotedTime})},this.getWaitlist=function(e){return t.get(r+"?restaurant_id="+e).then(function(t){return t.data})}}angular.module("waitrApp").service("waitlistService",t)}(),function(){function t(t){var e=this;e.reverse=!1,t.getRestaurants().then(function(t){return e.restaurantList=t})}angular.module("waitrApp").controller("CustomerHomeController",["restaurantService",t])}(),function(){function t(t,e,r,n){var o=this;o.restaurantId=e.restaurantId,o.menuTitle=null,t.getCurrentRestaurant(o.restaurantId).then(function(t){o.restaurant=t[0],o.groupedMenu=_.groupBy(o.restaurant.menu,"section")}),o.goBack=function(){r.goBack()},o.toggleSection=function(t){t===o.menuTitle?o.menuTitle=null:o.menuTitle=t}}angular.module("waitrApp").controller("custRestaurantMenuCtrl",["restaurantService","$stateParams","$ionicHistory","$state",t])}(),function(){function t(t,e,r,n,o,a,s){var i=this;i.infoHoursToggle=!0,i.restaurantId=n.restaurantId,i.currentUser=s.ccc.currentUser,t.getCurrentRestaurant(i.restaurantId).then(function(t){return i.restaurant=t[0]}),r.getWaitlist(i.restaurantId).then(function(t){return i.customerEntries=t[0]}),i.userAddingToQ=function(){r.addAnonToWaitlist(i.currentUser,i.restaurant.waitlist_id).then(function(){o.nextViewOptions({disableBack:!0}),a.go("restaurant.home")})},i.callTel=function(){return window.location.href="tel:"+i.restaurant.restaurantPhone},i.getWebsite=function(){return window.open(i.restaurant.restaurantWebsite,"_system","location=yes"),!1},i.goBack=function(){return o.goBack()},i.infoHoursToggle=!0,i.showOnClick=function(t){return i.infoHoursToggle=t}}angular.module("waitrApp").controller("CustomerRestaurantController",["restaurantService","userService","waitlistService","$stateParams","$ionicHistory","$state","$scope",t])}(),function(){function t(t,e,r,n,o,a,s){var i=this,u=t.restaurantId,l=io.connect("http://localhost:3000");i.currentUser=e.ccc.currentUser,n.getCurrentRestaurant(u).then(function(t){return i.currRestObj=t}),i.userAddingToQ=function(t,n,u,c,m){var p={user_id:i.currentUser._id,firstName:t,lastName:n,partySize:u,phone:c,notes:m};r.addAnonToWaitlist(p,i.currRestObj[0].waitlist_id).then(function(t){l.emit("newPerson",t),s.nextViewOptions({disableBack:!0});var r={inWaitList:i.currRestObj[0].waitlist_id};a.updateUser(i.currentUser._id,r).then(function(){e.ccc.currentUser.inWaitList=r.inWaitList,o.go("customer.waitlist")})})}}angular.module("waitrApp").controller("CustomerWaitlistConfirmController",["$stateParams","$scope","waitlistService","restaurantService","$state","userService","$ionicHistory",t])}(),function(){function t(t,e,r){var n=this;n.currentUser=r.ccc.currentUser,n.firstName=n.currentUser.firstName,n.lastName=n.currentUser.lastName,n.phone=n.currentUser.phone,n.email=n.currentUser.email,n.updateUser=function(o,a,s,i){var u={firstName:o,lastName:a,phone:s,email:i};t.updateUser(n.currentUser._id,u).then(function(t){r.ccc.currentUser=t,e.go("customer.settings")})}}angular.module("waitrApp").controller("CustomerSettingsController",["userService","$state","$scope",t])}(),function(){function t(t,e,r,n,o,a,s){var i=this,u=io.connect("http://localhost:3000");i.currentUser=r.ccc.currentUser,u.on("newPersonAdded",function(t){i.currentUser.inWaitList.list.push(t),r.$apply()}),u.on("deletedPerson",function(t){i.currentUser.inWaitList&&(i.currentUser.inWaitList.list.splice(t.pos,1),r.$apply())}),t.currentUser(i.currentUser._id).then(function(t){i.currentUser=t[0],e.getCurrentRestaurant(i.currentUser.inWaitList.restaurant_id).then(function(t){return i.restaurant=t[0]})}),i.removeFromWaitlist=function(){for(var t=i.currentUser.inWaitList.list,e=0;e<t.length;e++)t[e].user_id==i.currentUser._id&&n.removeFromWaitlist(t[e]._id,i.currentUser.inWaitList._id).then(function(t){r.ccc.currentUser.inWaitList=void 0,u.emit("deletePerson",t),s.nextViewOptions({disableBack:!0}),a.go("customer.home")})},i.showRemovePopup=function(){var t=o.confirm({title:"Remove from waitlist",template:"WARNING: this will remove you from the list"});t.then(function(t){t&&i.removeFromWaitlist()})}}angular.module("waitrApp").controller("CustomerWaitlistController",["userService","restaurantService","$scope","waitlistService","$ionicPopup","$state","$ionicHistory",t])}(),function(){function t(t,e,r,n,o){var a=this;a.restaurant=e.rrc.restaurant,a.menuTitle=null,a.groupedMenu=_.groupBy(a.restaurant.menu,"section"),a.newMenuItem,a.newSection,a.goBack=function(){o.goBack()},a.toggleSection=function(t){t===a.menuTitle?a.menuTitle=null:a.menuTitle=t},a.updateRestaurantMenu=function(){t.confirm({templateUrl:"./app/restaurant/restaEditMenu/restaAddMenuItem.html",scope:e}).then(function(t){t&&("new"===a.newMenuItem.section&&(a.newMenuItem.section=a.newSection),r.updateRestaurantMenu(a.restaurant._id,a.newMenuItem).then(function(t){console.log(t),a.groupedMenu=_.groupBy(t.menu,"section")}))})},a.deleteItem=function(n){t.confirm({template:"<h3>Are you sure?</h3>",title:"Deleting item",scope:e}).then(function(t){t&&r.deleteRestaurantMenuItem(a.restaurant._id,n).then(function(t){a.groupedMenu=_.groupBy(t.menu,"section")})})}}angular.module("waitrApp").controller("restaEditMenuCtrl",["$ionicPopup","$scope","restaurantService","$state","$ionicHistory",t])}(),function(){function t(t,e){var r=this;r.menuTitle=null,r.restaurant=t.rrc.restaurant,r.groupedMenu=_.groupBy(r.restaurant.menu,"section"),r.goBack=function(){e.goBack()},r.toggleSection=function(t){t===r.menuTitle?r.menuTitle=null:r.menuTitle=t}}angular.module("waitrApp").controller("restaMenuCtrl",["$scope","$ionicHistory",t])}(),function(){function t(t,e,r,n,o,a,s){var i=io.connect("http://localhost:3000"),u=this;u.currentRestaurant=s.rrc.restaurant,t.getOneFromWaitlist(n.person,n.waitlist).then(function(t){u.person=t}),u.notification=function(){var t={phone:"+1"+u.person.phone,firstName:u.person.firstName,restaurant:u.currentRestaurant.restaurantName};console.log("this is the phone number",t.phone),a.notification(t)},u.submitEditedEntry=function(o){console.log("rec.person is: ",o),t.updateWaitlistEntry(n.person,n.waitlist,o).then(function(t){console.log("successfully updated entry!"),e.go("restaurant.home"),r.nextViewOptions({disableBack:!0})})};var l=function(){t.removeFromWaitlist(n.person,n.waitlist).then(function(t){i.emit("deletePerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")})};u.showCheckInPopup=function(){var t=o.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),l()):console.log("user does not want to check person in")}),e.go("restaurant.home")},u.showCheckInPopup=function(){var t=o.confirm({title:"Check in user",template:"Are you sure you want to check in this user?"});t.then(function(t){t?(console.log("user wants to check person in"),l()):console.log("user does not want to check person in")})},u.showRemovePopup=function(){var t=o.confirm({title:"Remove from waitlist",template:"WARNING: this will remove the user from the waitlist entirely"});t.then(function(t){t?(console.log("user wants to remove person from list"),l()):console.log("user does not want to remove person from list")})}}angular.module("waitrApp").controller("restaEditCtrl",["waitlistService","$state","$ionicHistory","$stateParams","$ionicPopup","restaurantService","$scope",t])}(),function(){function t(t,e,r,n,o){var a=this;a.newPerson={};var s=io.connect("http://localhost:3000");s.on("newPersonAdded",function(t){console.log("socket data is: ",t),a.customerEntries.list.push(t),n.$apply()}),s.on("deletedPerson",function(t){console.log("hitting deletedPerson with data: ",t),a.customerEntries.list.splice(t.pos,1),n.$apply()}),moment.locale("en",{relativeTime:{future:"in %s",past:"%s",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mon",y:"1y",yy:"%dy"}}),a.currentUser=n.rrc.currentUser,t.getWaitlist(a.currentUser.restaurant_id).then(function(t){a.customerEntries=t[0]}),a.addPersonToQ=function(n){n.firstName&&n.lastName&&n.phone&&n.partySize?t.isValidPhone(n.phone)&&n.partySize<t.maxPartySize?t.addAnonToWaitlist(n,a.customerEntries._id,a.customerEntries.quotedTime).then(function(t){s.emit("newPerson",t),r.nextViewOptions({disableBack:!0}),e.go("restaurant.home")}):o.show({title:"Invalid Data",template:"Phone number must be 10 digits and party size cannot exceed 100<br/>Ex. 1234567890",buttons:[{text:"OK"}]}):o.show({title:"Invalid Data",template:"Fill out all fields before pressing 'Submit'",buttons:[{text:"OK"}]})},a.showWaitTimeModal=function(e){console.log(e),a.time=e;o.confirm({template:'<label class="item item-input"><input type="tel" ng-model="rhc.time" min="0"></label>',title:"Enter Wait Time",scope:n,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(t){return a.time=parseInt(a.time),a.time<0||isNaN(a.time)?void t.preventDefault():a.time}}]}).then(function(e){e>=0&&t.updateWaitTime(a.customerEntries._id,e).then(function(t){a.customerEntries.quotedTime=t})})}}angular.module("waitrApp").controller("restaHomeCtrl",["waitlistService","$state","$ionicHistory","$scope","$ionicPopup",t])}(),function(){function t(t,e,r){var n=this;n.infoHoursToggle=!0,n.currentUser=e.rrc.currentUser,n.restaurant=e.rrc.restaurant,t.getWaitlist(n.currentUser.restaurant_id).then(function(t){n.customerEntries=t[0]}),n.callTel=function(){window.location.href="tel:"+n.restaurant.restaurantPhone},n.getWebsite=function(){return window.open(n.restaurant.restaurantWebsite,"_system","location=yes"),!1},n.infoHoursToggle=!0,n.showOnClick=function(t){n.infoHoursToggle=t}}angular.module("waitrApp").controller("restaProfileCtrl",["waitlistService","$scope","userService",t])}(),function(){function t(t,e,r){var n=this;n.currentUserID=e.rrc.currentUser.restaurant_id,n.restaurant=e.rrc.restaurant,n.restaurant.hours.monday.openTime=new Date(n.restaurant.hours.monday.openTime),n.restaurant.hours.monday.closeTime=new Date(n.restaurant.hours.monday.closeTime),n.restaurant.hours.tuesday.openTime=new Date(n.restaurant.hours.tuesday.openTime),n.restaurant.hours.tuesday.closeTime=new Date(n.restaurant.hours.tuesday.closeTime),n.restaurant.hours.wednesday.openTime=new Date(n.restaurant.hours.wednesday.openTime),n.restaurant.hours.wednesday.closeTime=new Date(n.restaurant.hours.wednesday.closeTime),n.restaurant.hours.thursday.openTime=new Date(n.restaurant.hours.thursday.openTime),n.restaurant.hours.thursday.closeTime=new Date(n.restaurant.hours.thursday.closeTime),n.restaurant.hours.friday.openTime=new Date(n.restaurant.hours.friday.openTime),n.restaurant.hours.friday.closeTime=new Date(n.restaurant.hours.friday.closeTime),n.restaurant.hours.saturday.openTime=new Date(n.restaurant.hours.saturday.openTime),n.restaurant.hours.saturday.closeTime=new Date(n.restaurant.hours.saturday.closeTime),n.restaurant.hours.sunday.openTime=new Date(n.restaurant.hours.sunday.openTime),n.restaurant.hours.sunday.closeTime=new Date(n.restaurant.hours.sunday.closeTime),n.updateRestaurant=function(e){t.updateRestaurant(n.restaurant._id,e)}}angular.module("waitrApp").controller("restaSettingsCtrl",["restaurantService","$scope","$filter",t]).directive("formattedTime",function(t){return{require:"?ngModel",link:function(t,e,r,n){n&&"time"===r.type&&n.$formatters.unshift(function(t){return t.replace(/:[0-9]+.[0-9]+$/,"")})}}})}();